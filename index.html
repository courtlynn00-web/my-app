<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mystery Mood ‚Äî Tracker</title>
  <link rel="icon" href="icon.png" type="image/png" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icon.png" />
  <meta name="theme-color" content="#FDEDE5" />
  <style>
    body {
      background: #FDEDE5;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #6A4A3C;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin-bottom: 10px;
    }
    .card {
      background: white;
      border-radius: 20px;
      padding: 20px;
      max-width: 360px;
      margin: 20px auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    button {
      background: #F8B9C4;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:active {
      transform: scale(0.95);
    }
    select, textarea {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #e0d5c1;
      font-size: 14px;
    }
    #logsList {
      text-align: left;
      max-width: 360px;
      margin: 20px auto;
      padding: 0;
      list-style: none;
    }
    #logsList li {
      background: #FFF7F2;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 8px;
      border: 1px solid #e0d5c1;
    }
    #quoteBox {
      margin: 16px 0;
      font-style: italic;
      color: #6A4A3C;
    }
  </style>
</head>
<body>
  <h1>‚ô° Mystery Mood ‚Äî Tracker ‚ô°</h1>

  <div class="card">
    <select id="moodSelect">
      <option value="">Select your mood ‚Ä¶</option>
      <option value="Calm">‚òÅÔ∏è Calm</option>
      <option value="Happy">‚òÄÔ∏è Happy</option>
      <option value="Cozy">‚òï Cozy</option>
      <option value="Excited">‚ú® Excited</option>
      <option value="Motivated">üí™ Motivated</option>
      <option value="Sad">üåßÔ∏è Sad</option>
      <option value="Anxious">‚ö° Anxious</option>
      <option value="Stressed">üò£ Stressed</option>
      <option value="Tired">üò¥ Tired</option>
      <option value="Meh">üòê Meh</option>
    </select>

    <textarea id="note" placeholder="Add a short note (optional)" rows="3"></textarea>

    <button id="saveBtn">‚ú® Save Log ‚ú®</button>
    <button id="mysteryBtn">‚ú® Mystery Mood ‚ú®</button>

    <div id="quoteBox">‚ô° Your daily wellness quote will appear here ‚ô°</div>
  </div>

  <div class="card">
    <h2>Recent Logs</h2>
    <ul id="logsList"></ul>
    <button id="clearBtn">Clear All Logs</button>
    <button id="exportBtn">Export CSV</button>
  </div>

  <script>
    const quotes = {
      Calm: ["You are a sea of peace.", "Let your heart float like a feather."],
      Happy: ["Joy blooms from within.", "You are a ray of sunshine."],
      Cozy: ["Warm moments heal the heart.", "This is a soft chapter of your story."],
      Excited: ["Your spark lights up the world.", "Good things are coming your way."],
      Motivated: ["Small steps create big change.", "You are moving forward beautifully."],
      Sad: ["It‚Äôs okay to feel the rain.", "Healing comes in waves."],
      Anxious: ["Breathe‚Äîyour mind is safe here.", "You are stronger than the storm."],
      Stressed: ["You deserve rest.", "Be gentle with yourself."],
      Tired: ["Rest is productive.", "Your body is asking for softness."],
      Meh: ["Neutral days are still progress days.", "Even stillness is growth."]
    };

    const storageKey = "mysteryMoodLogs";

    function loadLogs() {
      const raw = localStorage.getItem(storageKey);
      const logs = raw ? JSON.parse(raw) : [];
      const list = document.getElementById("logsList");
      list.innerHTML = "";
      logs.forEach(l => {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${l.mood}</strong> ‚Äî ${l.date}<br><em>"${l.quote}"</em>${l.note ? `<br>Note: ${l.note}` : ""}`;
        list.appendChild(li);
      });
    }

    function saveLog() {
      const mood = document.getElementById("moodSelect").value;
      const note = document.getElementById("note").value;
      if (!mood) {
        return alert("Please select a mood!");
      }
      const possible = quotes[mood];
      const quote = possible[Math.floor(Math.random() * possible.length)];
      const log = { mood, note, quote, date: new Date().toLocaleString() };
      const logs = JSON.parse(localStorage.getItem(storageKey) || "[]");
      logs.unshift(log);
      localStorage.setItem(storageKey, JSON.stringify(logs));
      document.getElementById("quoteBox").innerText = quote;
      document.getElementById("note").value = "";
      document.getElementById("moodSelect").value = "";
      loadLogs();
    }

    function clearLogs() {
      if (confirm("Clear all logs?")) {
        localStorage.removeItem(storageKey);
        loadLogs();
      }
    }

    function exportCSV() {
      const logs = JSON.parse(localStorage.getItem(storageKey) || "[]");
      if (!logs.length) {
        return alert("No logs to export yet!");
      }
      const rows = [["Mood", "Quote", "Note", "Date"], ...logs.map(l => [l.mood, l.quote, l.note, l.date])];
      let csv = rows.map(r => r.map(c => `"${String(c).replace(/"/g, '""')}"`).join(",")).join("\\n");
      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "mood_logs.csv";
      a.click();
      URL.revokeObjectURL(url);
    }

    document.getElementById("saveBtn").onclick = saveLog;
    document.getElementById("mysteryBtn").onclick = () => {
      const moods = Object.keys(quotes);
      const random = moods[Math.floor(Math.random() * moods.length)];
      document.getElementById("moodSelect").value = random;
      document.getElementById("quoteBox").innerText = quotes[random][Math.floor(Math.random() * quotes[random].length)];
    };
  
    document.getElementById("clearBtn").onclick = clearLogs;
    document.getElementById("exportBtn").onclick = exportCSV;

    loadLogs();
  </script>
</body>
</html>
