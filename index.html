<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mystery Mood Tracker</title>

  <!-- App Icon -->
  <link rel="icon" href="icon.png" type="image/png">
  <link rel="apple-touch-icon" href="icon.png">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Theme Color -->
  <meta name="theme-color" content="#FDEDE5" />

  <style>
    body {
      font-family: "Arial Rounded MT", Arial, sans-serif;
      background: #fdf7ff;
      text-align: center;
      padding: 20px;
      color: #333;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 14px;
      color: #a85ae6;
    }

    .box {
      background: white;
      padding: 18px;
      border-radius: 14px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      max-width: 480px;
      margin: auto;
    }

    select, textarea, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 16px;
    }

    button {
      background: #b37bff;
      color: white;
      cursor: pointer;
      border: none;
    }

    button:hover {
      background: #a567f1;
    }

    .log-item {
      background: #faf2ff;
      padding: 10px;
      margin-top: 10px;
      border-radius: 10px;
      text-align: left;
    }

    .quote-box {
      background: #fff0ff;
      border-radius: 10px;
      padding: 12px;
      margin-top: 10px;
      font-style: italic;
      color: #7a4bad;
    }

    .footer-buttons {
      margin-top: 20px;
    }

    .footer-buttons button {
      width: 48%;
      display: inline-block;
    }
  </style>
</head>

<body>

  <h1>♡ Mystery Mood — Tracker ♡</h1>

  <div class="box">
    <h3>Select your mood…</h3>

    <select id="mood-select">
      <option value="">Choose one…</option>
      <option>Happy</option>
      <option>Calm</option>
      <option>Cozy</option>
      <option>Excited</option>
      <option>Motivated</option>
      <option>Sad</option>
      <option>Anxious</option>
      <option>Stressed</option>
      <option>Tired</option>
      <option>Meh</option>
    </select>

    <textarea id="note" placeholder="Add a short note (optional)" rows="3"></textarea>

    <button onclick="saveLog()">✨ Save Log ✨</button>

    <div class="quote-box" id="quoteBox">♡ Your daily wellness quote will appear here ♡</div>

    <hr style="margin: 20px 0;">

    <h3>Recent Logs</h3>
    <div id="logs">No mood logged yet ♡</div>

    <div class="footer-buttons">
      <button onclick="clearLogs()">Clear All Logs</button>
      <button onclick="exportCSV()">Export CSV</button>
    </div>
  </div>

  <script>
    const quotes = {
      Happy: [
        "Joy is your superpower today.",
        "Happiness looks beautiful on you."
      ],
      Calm: [
        "You are a soft wave in a loud world.",
        "Peace surrounds you."
      ],
      Cozy: [
        "Warm moments heal the heart.",
        "This is a soft chapter of your story."
      ],
      Excited: [
        "Your energy is electric today!",
        "Good things are coming your way."
      ],
      Motivated: [
        "Small steps create big change.",
        "You are moving forward beautifully."
      ],
      Sad: [
        "It’s okay to rest inside your feelings.",
        "Your heart is allowed to be tender."
      ],
      Anxious: [
        "Breathe—your mind is safe here.",
        "You are stronger than the storm."
      ],
      Stressed: [
        "You are carrying more than you should. Be gentle with yourself.",
        "You deserve rest."
      ],
      Tired: [
        "Your body is asking for softness.",
        "Rest is productive."
      ],
      Meh: [
        "Neutral days are still progress days.",
        "Even stillness is growth."
      ]
    };

    const logsDiv = document.getElementById("logs");
    const quoteBox = document.getElementById("quoteBox");

    function saveLog() {
      const mood = document.getElementById("mood-select").value;
      const note = document.getElementById("note").value;

      if (!mood) {
        alert("Please select a mood!");
        return;
      }

      const quoteChoices = quotes[mood] || ["You are doing your best today."];
      const randomQuote = quoteChoices[Math.floor(Math.random() * quoteChoices.length)];
      quoteBox.innerText = randomQuote;

      const log = {
        mood,
        note,
        quote: randomQuote,
        date: new Date().toLocaleString(),
      };

      let logs = JSON.parse(localStorage.getItem("moodLogs") || "[]");
      logs.unshift(log);
      localStorage.setItem("moodLogs", JSON.stringify(logs));

      loadLogs();
      document.getElementById("note").value = "";
      document.getElementById("mood-select").value = "";
    }

    function loadLogs() {
      let logs = JSON.parse(localStorage.getItem("moodLogs") || "[]");

      if (logs.length === 0) {
        logsDiv.innerHTML = "No mood logged yet ♡";
        return;
      }

      logsDiv.innerHTML = logs
        .map(
          (l) => `
        <div class="log-item">
          <strong>${l.mood}</strong> — <em>${l.date}</em><br />
          "${l.quote}"<br />
          ${l.note ? l.note : "<i>No note</i>"}
        </div>
      `
        )
        .join("");
    }

    function clearLogs() {
      if (confirm("Clear all logs?")) {
        localStorage.removeItem("moodLogs");
        loadLogs();
      }
    }

    function exportCSV() {
      let logs = JSON.parse(localStorage.getItem("moodLogs") || "[]");

      if (logs.length === 0) {
        alert("No logs to export yet!");
        return;
      }

      let csv = "Mood,Quote,Note,Date\n";
      logs.forEach((l) => {
        csv += `"${l.mood}","${l.quote.replace(/"/g, "'")}","${l.note.replace(/"/g, "'")}","${l.date}"\n`;
      });

      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "mood_logs.csv";
      a.click();
    }

    loadLogs();
  </script>

</body>
</html>
